---
layout: post
title: 【python官方文档翻译】：字符串格式操作
---
字符串和unicode字符串对象有一个独一无二的内置操作：%操作符（求模符号），又名字符串格式化或者嵌入操作。给定 format % values（format是一个字符串或unicode字符串对象），format里面的 % 将会被values里面的元素所替换，values可能是个元组。这种作用类似于c语言中的sprintf函数。如果
format是一个unicode对象，或者任何使用%s被替换的对象是unicode对象，那么最后结果也是unicode对象。如下图：

![_config.yml]({{ site.baseurl }}/images/trans_01.png)

如果format只需要一个参数，那么values可能只是一个非元组对象。否则，values必须是一个元素数量等于format中指定的替换字符串数量数量的元组，或者是一个映射对象，如字典。

一个转换操作符（如%s）通常包含2个或更多字母，他们分别代表下面列出的组件，字母顺序不能错：
1.%字符，标记转换操作符的开始。
2.映射键（可选），如(name),(age),括号是必须的。
3.转换标志（可选），会影响部分转换类型。这些标志有#，0等，后面会介绍作用。
4.最小字段宽度（可选），如果指定为‘*’，那么将读取values中元组的下一个元素作为真实宽度。
5.精度（可选），‘.’后面跟的就是精度，如果指定为‘*’，那么将读取values中元组的下一个元素
作为真实精度。
6.长度改进符（可选）。
7.转换类型。

翻译的比较生涩，文档描述的意思也没完全看懂，好在可以通过测试来验证每个字母的作用，感谢python的交互式开发环境（开发理念）。主要不理解集中在4,5,所以范例如下：

![_config.yml]({{ site.baseurl }}/images/trans_02.png)

如上图所示，宽度和精度是协同工作的，就看谁更大，以更大的那个长度作为对象最终转换成字符串的长度，这个原理同样适用于字符串类型的对象，如下图：

![_config.yml]({{ site.baseurl }}/images/trans_03.png)

转换标志:
"#":这个值将使用“d,f,s”等转换类型？什么意思，实际使用也没看出来能干嘛。
"0":只为数字转换类型服务，当宽度不够时，‘0’会填充字符串的最左边，个数直到填充满宽度为止。
"-":字符串左对齐，和“0”同时使用时会覆盖“0”的作用。
" ":通过有符号转换在一个正数（或空字符串）左边产生一个空格？看不出效果。
"+":先于转换之前的一个符号字母，覆盖空格转换标志?只有在d转换类型下起作用，2 to +2,不明白作用。